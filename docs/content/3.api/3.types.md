---
title: Protocol Types
description: Data types used in the WebSocket protocol
icon: ph:code-duotone
---

# Protocol Types

:ellipsis{right=0px width=50% blur=100px}

Go types defined in `pkg/protocol/`. These are serialized to JSON for WebSocket communication.

::alert{type="info"}
**Source of Truth.** All types are defined in Go. The Hub's TypeScript types are generated from these.
::

## Core Types

### AgentInfo

Information about an Agent, returned by `get_info` / `info_response`.

::code-group
```go [Go]
type AgentInfo struct {
    ID                    string       `json:"id"`
    Name                  string       `json:"name"`
    Platform              string       `json:"platform"`
    Version               string       `json:"version"`
    AcceptConnections     bool         `json:"acceptConnections"`
    SupportedImageFormats []string     `json:"supportedImageFormats"`
    Capabilities          []Capability `json:"capabilities"`
}
```

```json [JSON Example]
{
  "id": "agent-abc123",
  "name": "Steam Deck",
  "platform": "linux",
  "version": "0.1.0",
  "acceptConnections": true,
  "supportedImageFormats": ["png", "jpg", "webp"],
  "capabilities": ["file_upload", "steam_shortcuts"]
}
```
::

### Capability

:badge[Enum]{type="warning"}

```go
type Capability string

const (
    CapFileUpload     Capability = "file_upload"
    CapFileList       Capability = "file_list"
    CapSteamShortcuts Capability = "steam_shortcuts"
    CapSteamArtwork   Capability = "steam_artwork"
    CapSteamUsers     Capability = "steam_users"
    CapSteamRestart   Capability = "steam_restart"
)
```

## Configuration Types

### UploadConfig

Configuration for initializing an upload session.

```go
type UploadConfig struct {
    GameName      string `json:"gameName"`
    InstallPath   string `json:"installPath"`
    Executable    string `json:"executable"`
    LaunchOptions string `json:"launchOptions,omitempty"`
    Tags          string `json:"tags,omitempty"`
}
```

### ShortcutConfig

Configuration for creating a Steam shortcut.

::code-group
```go [Go]
type ShortcutConfig struct {
    Name          string         `json:"name"`
    Exe           string         `json:"exe"`
    StartDir      string         `json:"startDir"`
    LaunchOptions string         `json:"launchOptions,omitempty"`
    Tags          []string       `json:"tags,omitempty"`
    Artwork       *ArtworkConfig `json:"artwork,omitempty"`
}
```

```json [JSON Example]
{
  "name": "Celeste",
  "exe": "/home/deck/Games/Celeste/Celeste.exe",
  "startDir": "/home/deck/Games/Celeste",
  "tags": ["Indie", "Platformer"],
  "artwork": {
    "grid": "https://cdn.steamgriddb.com/...",
    "hero": "https://cdn.steamgriddb.com/..."
  }
}
```
::

### ArtworkConfig

URLs for Steam artwork images.

```go
type ArtworkConfig struct {
    Grid   string `json:"grid,omitempty"`   // 600×900 vertical
    Hero   string `json:"hero,omitempty"`   // 1920×620 banner
    Logo   string `json:"logo,omitempty"`   // transparent PNG
    Icon   string `json:"icon,omitempty"`   // square icon
    Banner string `json:"banner,omitempty"` // 460×215 horizontal
}
```

::alert{type="success"}
**SteamGridDB Integration.** The Hub has built-in search for SteamGridDB artwork. Just search by game name.
::

### ShortcutInfo

Information about an existing shortcut.

```go
type ShortcutInfo struct {
    AppID         uint32   `json:"appId"`
    Name          string   `json:"name"`
    Exe           string   `json:"exe"`
    StartDir      string   `json:"startDir"`
    LaunchOptions string   `json:"launchOptions,omitempty"`
    Tags          []string `json:"tags,omitempty"`
    LastPlayed    int64    `json:"lastPlayed,omitempty"`
}
```

## Upload Types

### UploadStatus
:badge[Enum]{type="warning"}

```go
type UploadStatus string

const (
    UploadStatusPending    UploadStatus = "pending"
    UploadStatusInProgress UploadStatus = "in_progress"
    UploadStatusCompleted  UploadStatus = "completed"
    UploadStatusFailed     UploadStatus = "failed"
    UploadStatusCancelled  UploadStatus = "cancelled"
)
```

### FileEntry

Single file in the upload manifest.

```go
type FileEntry struct {
    RelativePath string `json:"relativePath"`
    Size         int64  `json:"size"`
}
```

## Message Types

### MessageType
:badge[Enum]{type="warning"}

All WebSocket message types:

::code-group
```go [Connection]
MsgTypeHubConnected    = "hub_connected"
MsgTypeAgentStatus     = "agent_status"
```

```go [Authentication]
MsgTypePairingRequired = "pairing_required"
MsgTypePairConfirm     = "pair_confirm"
MsgTypePairSuccess     = "pair_success"
MsgTypePairFailed      = "pair_failed"
```

```go [RPC Requests]
MsgTypePing            = "ping"
MsgTypeGetInfo         = "get_info"
MsgTypeGetConfig       = "get_config"
MsgTypeGetSteamUsers   = "get_steam_users"
MsgTypeListShortcuts   = "list_shortcuts"
MsgTypeCreateShortcut  = "create_shortcut"
MsgTypeDeleteShortcut  = "delete_shortcut"
MsgTypeApplyArtwork    = "apply_artwork"
MsgTypeRestartSteam    = "restart_steam"
MsgTypeInitUpload      = "init_upload"
MsgTypeCompleteUpload  = "complete_upload"
MsgTypeCancelUpload    = "cancel_upload"
```

```go [RPC Responses]
MsgTypePong            = "pong"
MsgTypeInfoResponse    = "info_response"
MsgTypeConfigResponse  = "config_response"
MsgTypeSteamUsersResponse = "steam_users_response"
MsgTypeShortcutsResponse  = "shortcuts_response"
MsgTypeUploadInitResponse = "upload_init_response"
MsgTypeOperationResult = "operation_result"
MsgTypeError           = "error"
```

```go [Push Events]
MsgTypeUploadProgress  = "upload_progress"
MsgTypeUploadChunkResponse = "upload_chunk_response"
MsgTypeOperationEvent  = "operation_event"
```
::

### Message Envelope

Every WebSocket message follows this structure:

```go
type Message struct {
    ID      string          `json:"id"`
    Type    MessageType     `json:"type"`
    Payload json.RawMessage `json:"payload,omitempty"`
    Error   *WSError        `json:"error,omitempty"`
}
```

::alert{type="info"}
**Request/Response Correlation.** The `id` field links responses to requests. Always include it in requests.
::

## Constants

### Timing

| Constant | Value | Purpose |
|----------|-------|---------|
| `WSWriteWait` | 10s | Max time to write a message |
| `WSPongWait` | 15s | Max wait for pong response |
| `WSPingPeriod` | 5s | Keep-alive ping interval |
| `WSMaxMessageSize` | 10MB | Maximum message size |
| `WSChunkSize` | 1MB | Binary chunk size |
| `WSRequestTimeout` | 30s | RPC request timeout |

### Error Codes

| Code | Meaning | When |
|------|---------|------|
| 400 | Bad Request | Invalid message format |
| 401 | Unauthorized | Pairing required or invalid token |
| 404 | Not Found | Resource doesn't exist |
| 406 | Not Accepted | Connections blocked |
| 409 | Conflict | Hub already connected |
| 500 | Internal | Server error |
| 501 | Not Implemented | Feature not available |

## See Also

::card-grid
  ::card{icon=ph:lightning-duotone}
  #title
  [WebSocket API](/api/websocket)
  #description
  Full message reference with examples.
  ::

  ::card{icon=ph:star-duotone}
  #title
  [Capabilities](/architecture/capabilities)
  #description
  How capabilities affect available operations.
  ::
::
